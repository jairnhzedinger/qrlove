<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QRLove</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Crie uma p√°gina personalizada para celebrar seu amor com o QRLove. Adicione fotos, datas importantes e muito mais. Veja quanto tempo est√£o juntos!">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="QRLove: Celebrando o Amor">
  <meta property="og:description" content="Adicione fotos, datas importantes e veja quanto tempo est√£o juntos com o QRLove!">
  <meta name="keywords" content="amor, casal, QRCode, celebra√ß√£o de amor, tempo juntos">

  <style>
    /* Estilo global */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      font-size: 16px;
      color-scheme: light;
    }

    body {
      font-family: 'Poppins', 'Arial', sans-serif;
      background: linear-gradient(180deg, #fff6f9 0%, #ffe2eb 35%, #fff 100%);
      color: #2f2a2a;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 0 12px;
    }

    header {
      background: radial-gradient(circle at top right, rgba(255, 94, 94, 0.25), transparent 60%), linear-gradient(120deg, #ff8ba7, #ff5e5e);
      color: #fff;
      padding: 60px 24px;
      text-align: center;
      position: relative;
      overflow: hidden;
      border-radius: 28px;
      margin: 24px auto 0 auto;
      max-width: 1120px;
      box-shadow: 0 20px 55px rgba(255, 94, 94, 0.28);
    }

    header::before,
    header::after {
      content: '';
      position: absolute;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 50%;
      filter: blur(0);
    }

    header::before {
      width: 220px;
      height: 220px;
      top: -50px;
      left: 10%;
    }

    header::after {
      width: 320px;
      height: 320px;
      bottom: -120px;
      right: -40px;
    }

    header h1 {
      font-size: 2.8rem;
      margin-bottom: 15px;
    }

    header p {
      max-width: 660px;
      margin: 0 auto;
      font-size: 1.1rem;
      opacity: 0.95;
    }

    main {
      width: 100%;
      max-width: 1120px;
      margin: -80px auto 60px auto;
      padding: 0 12px 80px 12px;
      position: relative;
      z-index: 1;
    }

    .card-shell {
      background: #fff;
      border-radius: 28px;
      box-shadow: 0 35px 80px rgba(255, 94, 94, 0.22);
      padding: 40px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 40px;
      position: relative;
      isolation: isolate;
    }

    .card-shell::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 28px;
      padding: 2px;
      background: linear-gradient(135deg, rgba(255, 94, 94, 0.15), rgba(255, 160, 160, 0.2));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events: none;
    }

    .form-container {
      background: rgba(255, 245, 247, 0.92);
      border-radius: 20px;
      padding: 24px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      border: 1px solid rgba(255, 94, 94, 0.12);
      backdrop-filter: blur(6px);
    }

    .form-header {
      text-align: center;
    }

    .form-header h2 {
      font-size: 2rem;
      color: #ff5e5e;
      margin-bottom: 8px;
    }

    .form-header p {
      font-size: 0.95rem;
      color: #6c5c5c;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    label {
      font-weight: 600;
      color: #4c3f3f;
      font-size: 0.95rem;
    }

    .optional-tag {
      font-weight: 500;
      color: #8a7575;
      font-size: 0.85rem;
      margin-left: 6px;
    }

    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid rgba(255, 94, 94, 0.28);
      background: #fff;
      color: #2f2a2a;
      font-size: 1rem;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="date"]:focus,
    select:focus {
      outline: none;
      border-color: #ff5e5e;
      box-shadow: 0 0 0 3px rgba(255, 94, 94, 0.2);
    }

    input[type="date"] {
      appearance: none;
      -webkit-appearance: none;
    }

    input[type="file"] {
      display: none;
    }

    .custom-file-upload {
      width: 100%;
      padding: 14px 18px;
      border: 2px dashed rgba(255, 94, 94, 0.35);
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.9);
      font-size: 1rem;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.15s ease;
      color: #ff5e5e;
      font-weight: 600;
    }

    .custom-file-upload:hover,
    .custom-file-upload:focus-visible {
      background-color: rgba(255, 94, 94, 0.08);
      transform: translateY(-1px);
      outline: none;
    }

    .file-name {
      margin-top: 8px;
      font-size: 0.85rem;
      color: #6c5c5c;
      font-weight: 500;
      min-height: 1.2rem;
    }

    .field-hint {
      font-size: 0.85rem;
      color: #8a7575;
      margin-top: -4px;
    }

    .benefits-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 8px;
    }

    .benefits-chips span {
      background: rgba(255, 94, 94, 0.12);
      color: #ff5e5e;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 600;
    }

    .preview-container {
      background: linear-gradient(140deg, #ff5e5e, #ff8ba7);
      color: #fff;
      border-radius: 24px;
      padding: 26px;
      text-align: center;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      gap: 18px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.25);
    }

    .preview-container::before {
      content: '';
      position: absolute;
      width: 160px;
      height: 160px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      top: -40px;
      right: -30px;
    }

    .preview-container::after {
      content: '';
      position: absolute;
      width: 220px;
      height: 220px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 50%;
      bottom: -60px;
      left: -30px;
    }

    .preview-container h2 {
      font-size: 1.6rem;
      letter-spacing: 0.5px;
      position: relative;
      z-index: 1;
    }

    .preview-tagline {
      font-size: 0.9rem;
      opacity: 0.85;
      position: relative;
      z-index: 1;
    }

    .preview-container img {
      border-radius: 18px;
      max-width: 100%;
      box-shadow: 0 24px 48px rgba(15, 1, 26, 0.35);
      border: 8px solid rgba(255, 255, 255, 0.28);
      position: relative;
      z-index: 1;
    }

    .countdown {
      margin-top: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      position: relative;
      z-index: 1;
    }

    .countdown small {
      display: block;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      opacity: 0.75;
      margin-bottom: 4px;
    }

    .badge-floating {
      position: absolute;
      top: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      color: #ff5e5e;
      padding: 10px 20px;
      border-radius: 999px;
      font-size: 0.85rem;
      font-weight: 700;
      box-shadow: 0 18px 30px rgba(255, 255, 255, 0.25);
      white-space: nowrap;
      z-index: 2;
    }

    .comprar-btn {
      width: 100%;
      padding: 18px;
      border-radius: 16px;
      border: none;
      background: linear-gradient(135deg, #ff5e5e, #ff3366);
      color: #fff;
      font-size: 1.05rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.2px;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.2s ease;
      box-shadow: 0 18px 36px rgba(255, 51, 102, 0.35);
    }

    .comprar-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 24px 44px rgba(255, 51, 102, 0.45);
    }

    .comprar-btn:active {
      transform: translateY(1px);
    }

    .comprar-btn:focus-visible {
      outline: 3px solid rgba(255, 94, 94, 0.35);
      outline-offset: 4px;
    }

    .comprar-btn[disabled] {
      opacity: 0.7;
      cursor: wait;
      box-shadow: none;
    }

    .form-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .form-feedback {
      font-size: 0.9rem;
      color: #fff;
      background: #ff8ba7;
      border-radius: 12px;
      padding: 10px 14px;
      display: none;
    }

    .form-feedback.is-visible {
      display: block;
    }

    .love-checklist {
      margin-top: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
    }

    .love-checklist li {
      list-style: none;
      background: rgba(255, 245, 247, 0.9);
      padding: 16px;
      border-radius: 16px;
      border: 1px solid rgba(255, 94, 94, 0.15);
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 600;
      color: #6c4f56;
    }

    .love-checklist span {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, rgba(255, 94, 94, 0.25), rgba(255, 160, 160, 0.3));
      border-radius: 12px;
      display: grid;
      place-items: center;
      font-size: 1.2rem;
    }

    .section-title {
      text-align: center;
      margin: 90px auto 30px auto;
      max-width: 680px;
    }

    .section-title h3 {
      font-size: 2rem;
      color: #ff5e5e;
      margin-bottom: 10px;
    }

    .section-title p {
      color: #6f5a5c;
      font-size: 1rem;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 26px;
    }

    .feature-card {
      background: #fff;
      padding: 24px;
      border-radius: 20px;
      box-shadow: 0 20px 35px rgba(255, 94, 94, 0.08);
      border: 1px solid rgba(255, 94, 94, 0.08);
      text-align: left;
    }

    .feature-card h4 {
      font-size: 1.25rem;
      color: #ff5e5e;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .feature-card p {
      color: #725b60;
      font-size: 0.95rem;
    }

    .steps-wrapper {
      margin-top: 40px;
      background: linear-gradient(135deg, rgba(255, 94, 94, 0.08), rgba(255, 188, 188, 0.15));
      border-radius: 24px;
      padding: 36px 24px;
      display: grid;
      gap: 24px;
      border: 1px solid rgba(255, 94, 94, 0.18);
    }

    .step-card {
      background: #fff;
      border-radius: 18px;
      padding: 24px;
      display: flex;
      gap: 16px;
      align-items: flex-start;
      box-shadow: 0 20px 30px rgba(255, 94, 94, 0.08);
    }

    .step-icon {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255, 94, 94, 0.3), rgba(255, 94, 94, 0.5));
      color: #fff;
      font-weight: 700;
      font-size: 1.2rem;
      display: grid;
      place-items: center;
      flex-shrink: 0;
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 24px;
      margin-top: 20px;
    }

    .testimonial-card {
      background: #fff;
      padding: 24px;
      border-radius: 20px;
      box-shadow: 0 18px 26px rgba(255, 94, 94, 0.1);
      border: 1px solid rgba(255, 94, 94, 0.08);
    }

    .testimonial-card p {
      color: #6f5a5c;
      font-size: 0.95rem;
    }

    .testimonial-author {
      margin-top: 12px;
      font-weight: 600;
      color: #ff5e5e;
    }

    .faq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-top: 24px;
    }

    .faq-item {
      background: #fff;
      padding: 24px;
      border-radius: 18px;
      box-shadow: 0 16px 28px rgba(255, 94, 94, 0.08);
      border: 1px solid rgba(255, 94, 94, 0.08);
    }

    .faq-item h4 {
      color: #ff5e5e;
      margin-bottom: 10px;
    }

    footer {
      text-align: center;
      padding: 40px 20px 60px;
      color: #8b7478;
      font-size: 0.9rem;
    }

    footer a {
      color: #ff5e5e;
      text-decoration: none;
      font-weight: 600;
    }

    footer a:hover {
      text-decoration: underline;
    }

    @media (max-width: 960px) {
      header {
        padding: 48px 20px;
        margin-top: 12px;
        border-radius: 24px;
      }

      header h1 {
        font-size: 2.3rem;
      }

      main {
        margin-top: -60px;
      }

      .card-shell {
        grid-template-columns: 1fr;
        padding: 32px 24px;
      }

      .badge-floating {
        position: static;
        transform: none;
        display: inline-flex;
        align-self: center;
      }
    }

    @media (max-width: 720px) {
      body {
        background: #fff6f9;
      }

      header {
        padding: 40px 18px 48px;
        margin: 8px auto 0 auto;
      }

      header h1 {
        font-size: 1.8rem;
      }

      header p {
        font-size: 1rem;
      }

      main {
        margin-top: -48px;
        padding-bottom: 60px;
      }

      .card-shell {
        padding: 26px 20px;
        gap: 28px;
      }

      .preview-container {
        padding: 24px 18px;
      }

      .preview-container h2 {
        font-size: 1.4rem;
      }

      .countdown {
        font-size: 0.95rem;
      }

      .feature-grid,
      .love-checklist,
      .testimonials-grid,
      .faq-grid {
        grid-template-columns: 1fr;
      }

      .section-title {
        margin-top: 70px;
      }

      .step-card {
        flex-direction: column;
        text-align: center;
        align-items: center;
      }
    }

    @media (max-width: 540px) {
      body {
        padding: 0 8px;
      }

      header {
        border-radius: 18px;
      }

      header h1 {
        font-size: 1.65rem;
      }

      .card-shell {
        padding: 24px 18px;
      }

      label {
        font-size: 0.9rem;
      }

      input[type="text"],
      input[type="date"],
      select {
        font-size: 0.95rem;
        padding: 12px 14px;
      }

      .custom-file-upload {
        padding: 12px 14px;
      }

      .comprar-btn {
        padding: 16px;
        font-size: 1rem;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Transforme seu amor em um presente inesquec√≠vel</h1>
    <p>Crie uma experi√™ncia personalizada com QR Code, contador de tempo, galeria e mensagens especiais. Um mimo digital que parece joia artesanal.</p>
  </header>

  <main>
    <div class="card-shell">
      <!-- Formul√°rio -->
      <section class="form-container">
        <div class="form-header">
          <h2>Monte seu QRLove</h2>
          <p>Preencha os dados e visualize em tempo real como ficar√° o quadro digital de voc√™s.</p>
        </div>

        <form id="checkout-form" enctype="multipart/form-data" novalidate>
          <div>
            <label for="couple-name">Nome do casal</label>
            <input type="text" id="couple-name" name="couple-name" placeholder="Ex.: Ana &amp; Bruno" required>
            <p class="field-hint">Esse nome aparece no topo do presente e personaliza a p√°gina privada.</p>
          </div>

          <div>
            <label for="photo">Foto favorita</label>
            <label for="photo" class="custom-file-upload">üì∏ Fazer upload da foto perfeita</label>
            <input type="file" id="photo" name="photo" accept="image/*" required>
            <p class="file-name" id="file-name" aria-live="polite"></p>
            <div class="benefits-chips">
              <span>Filtro exclusivo</span>
              <span>QR Code integrado</span>
              <span>Vers√£o pronta para impress√£o</span>
            </div>
          </div>

          <div>
            <label for="start-date">Desde quando voc√™s se escolheram?</label>
            <input type="date" id="start-date" name="start-date" placeholder="Data de in√≠cio" required>
            <p class="field-hint">Usamos essa data para montar o contador de tempo com precis√£o de segundos.</p>
          </div>

          <div>
            <label for="plan">Escolha o plano perfeito</label>
            <select id="plan" name="plan" required>
              <option value="" disabled selected>Selecione um plano</option>
              <option value="1">Anual ‚Äî momentos digitais por R$ 19,90</option>
              <option value="2">Lifetime ‚Äî amor eterno por R$ 49,90</option>
            </select>
            <ul class="love-checklist">
              <li><span>üéÅ</span>Kit de arquivos em alta resolu√ß√£o</li>
              <li><span>üíå</span>P√°gina comemorativa exclusiva</li>
              <li><span>üïØÔ∏è</span>Layout premium inspirado em presentes de luxo</li>
            </ul>
          </div>

          <div>
            <label for="promo-code">Possui c√≥digo promocional? <span class="optional-tag">(opcional)</span></label>
            <input
              type="text"
              id="promo-code"
              name="promo-code"
              inputmode="text"
              autocomplete="off"
              placeholder="Ex.: AMOR10"
              aria-describedby="promo-code-hint"
            >
            <p class="field-hint" id="promo-code-hint">Ao validar, o desconto √© aplicado automaticamente no checkout.</p>
          </div>

          <div class="form-actions">
            <p class="form-feedback" id="form-feedback" role="status" aria-live="polite"></p>
            <button class="comprar-btn" id="comprar-btn" type="submit">Garantir meu QRLove</button>
          </div>
        </form>
      </section>

      <!-- Preview Container -->
      <aside class="preview-container" id="mobile-preview">
        <div class="badge-floating">Mockup em tempo real</div>
        <p class="preview-tagline">Quadro comemorativo com QR Code &amp; contador vivo</p>
        <h2>A hist√≥ria de</h2>
        <h2 id="couple-name-preview">*******</h2>
        <img id="photo-final" src="https://via.placeholder.com/720x1080/ffffff/ff5e5e?text=Foto+de+voc√™s!" alt="Pr√©-visualiza√ß√£o da arte do casal">
        <div class="countdown" id="countdown">
          <small>Tempo juntos</small>
          Estamos prontos para contar cada segundo da hist√≥ria de voc√™s
        </div>
      </aside>
    </div>

    <section class="section-title">
      <h3>Porque o QRLove √© o presente perfeito</h3>
      <p>Inspirado em caixas de joias e cartas eternas, o QRLove traz tecnologia e poesia para celebrar sua hist√≥ria.</p>
    </section>

    <section class="feature-grid" aria-label="Recursos do QRLove">
      <article class="feature-card">
        <h4>‚ú® Presente artesanal + digital</h4>
        <p>Receba um design exclusivo com moldura simulada, QR Code elegante e cores harm√¥nicas para destacar a foto favorita.</p>
      </article>
      <article class="feature-card">
        <h4>‚è≥ Contador vivo</h4>
        <p>O temporizador atualiza automaticamente, mostrando at√© os segundos de cumplicidade. Emo√ß√£o garantida ao vivo.</p>
      </article>
      <article class="feature-card">
        <h4>üì≤ P√°gina secreta</h4>
        <p>Um link com slug personalizado guarda mem√≥rias, depoimentos e surpresas para revisitar sempre que quiserem.</p>
      </article>
      <article class="feature-card">
        <h4>üé® Ajuste fino da arte</h4>
        <p>Aplicamos filtros suaves e composi√ß√£o equilibrada para transformar a foto em uma pe√ßa digna de exposi√ß√£o.</p>
      </article>
    </section>

    <section class="section-title">
      <h3>Como funciona em 3 passos</h3>
      <p>Seu presente pronto em minutos, com suporte humano e aten√ß√£o a cada detalhe.</p>
    </section>

    <section class="steps-wrapper" aria-label="Passo a passo do QRLove">
      <article class="step-card">
        <div class="step-icon">1</div>
        <div>
          <h4>Personalize com carinho</h4>
          <p>Envie os dados do casal, escolha o plano e suba a melhor foto. J√° mostramos o preview na hora.</p>
        </div>
      </article>
      <article class="step-card">
        <div class="step-icon">2</div>
        <div>
          <h4>Pagamento seguro via Stripe</h4>
          <p>Voc√™ √© direcionado para um checkout confi√°vel e, ap√≥s a confirma√ß√£o, iniciamos a magia.</p>
        </div>
      </article>
      <article class="step-card">
        <div class="step-icon">3</div>
        <div>
          <h4>Receba o kit premium</h4>
          <p>Entregamos o arquivo para impress√£o, QR Code personalizado e a p√°gina comemorativa pronta para compartilhar.</p>
        </div>
      </article>
    </section>

    <section class="section-title">
      <h3>Casais que j√° eternizaram seus momentos</h3>
      <p>Amor celebrado com tecnologia, carinho e detalhes dignos de filme rom√¢ntico.</p>
    </section>

    <section class="testimonials-grid" aria-label="Depoimentos de clientes">
      <article class="testimonial-card">
        <p>‚ÄúFoi o presente mais criativo que j√° dei. Choramos juntos vendo o contador marcar cada segundo da nossa hist√≥ria.‚Äù</p>
        <p class="testimonial-author">‚Äî Marina &amp; Carol</p>
      </article>
      <article class="testimonial-card">
        <p>‚ÄúImprimimos o quadro e deixamos na sala. Todo mundo pergunta o segredo do QR Code, √© sucesso garantido.‚Äù</p>
        <p class="testimonial-author">‚Äî Jo√£o &amp; Rafa</p>
      </article>
      <article class="testimonial-card">
        <p>‚ÄúRecebi tudo em menos de um dia, com v√°rias vers√µes para celular. D√° vontade de presentear todo mundo.‚Äù</p>
        <p class="testimonial-author">‚Äî Bia &amp; Lucas</p>
      </article>
    </section>

    <section class="section-title">
      <h3>Perguntas frequentes</h3>
      <p>Transpar√™ncia total para voc√™ sentir seguran√ßa antes de declarar amor em grande estilo.</p>
    </section>

    <section class="faq-grid" aria-label="Perguntas frequentes">
      <article class="faq-item">
        <h4>Em quanto tempo recebo o presente?</h4>
        <p>Nosso time envia o kit completo em at√© 24 horas √∫teis ap√≥s a confirma√ß√£o do pagamento.</p>
      </article>
      <article class="faq-item">
        <h4>Posso editar depois?</h4>
        <p>Claro! Ajustamos a foto, as cores ou o texto da p√°gina sempre que voc√™s quiserem manter tudo atualizado.</p>
      </article>
      <article class="faq-item">
        <h4>E se eu n√£o tiver foto?</h4>
        <p>Temos sugest√µes de ensaios r√°pidos e tamb√©m podemos criar uma colagem com fotos individuais.</p>
      </article>
      <article class="faq-item">
        <h4>Como o QR Code √© utilizado?</h4>
        <p>Ele leva diretamente para a p√°gina exclusiva de voc√™s, com contador ao vivo e mensagens especiais.</p>
      </article>
    </section>
  </main>

  <footer>
    <p>QRLove ¬© <span id="footer-year"></span> ‚Äî Celebrando hist√≥rias reais com tecnologia e poesia. Precisa de ajuda? Fale com a gente no <a href="mailto:contato@qrlove.com">contato@qrlove.com</a>.</p>
  </footer>

  <script src="https://js.stripe.com/v3/"></script>
  <script>
    // Vari√°vel para armazenar o intervalo do countdown
    let countdownInterval;

    const defaultImage = 'https://via.placeholder.com/720x1080/ffffff/ff5e5e?text=Foto+de+voc√™s!';

    // Fun√ß√£o para mostrar a pr√©via da imagem e registrar o nome do arquivo
    function previewImage(event) {
      const file = event.target.files[0];
      const photoFinal = document.getElementById('photo-final');
      const fileNameLabel = document.getElementById('file-name');

      if (!file) {
        photoFinal.src = defaultImage;
        fileNameLabel.textContent = '';
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        photoFinal.src = e.target.result;
      };
      reader.readAsDataURL(file);

      fileNameLabel.textContent = `Foto selecionada: ${file.name}`;
    }

    document.getElementById('photo').addEventListener('change', previewImage);

    // Fun√ß√£o para iniciar o countdown
    function startCountdown(startDate) {
      const countdownElement = document.getElementById('countdown');
      const start = parseDate(startDate);

      if (!start) {
        countdownElement.innerHTML = '<small>Tempo juntos</small>Escolha uma data especial para come√ßar a contagem';
        return;
      }

      // Limpar o intervalo anterior para evitar que v√°rios contadores rodem ao mesmo tempo
      if (countdownInterval) {
        clearInterval(countdownInterval);
      }

      function updateCountdown() {
        const now = new Date();
        const diff = now.getTime() - start.getTime();

        if (Number.isNaN(diff) || diff < 0) {
          countdownElement.innerHTML = '<small>Tempo juntos</small>Estamos prontos para contar cada segundo a partir da data escolhida';
          return;
        }

        const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25));
        const months = Math.floor((diff % (1000 * 60 * 60 * 24 * 365.25)) / (1000 * 60 * 60 * 24 * 30.44));
        const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30.44)) / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        countdownElement.innerHTML = `<small>Tempo juntos</small>${years} anos, ${months} meses, ${days} dias, ${hours} horas, ${minutes} minutos, ${seconds} segundos`;
      }

      updateCountdown();
      countdownInterval = setInterval(updateCountdown, 1000);
    }

    function parseDate(rawValue) {
      if (!rawValue) return null;

      const isoMatch = rawValue.match(/^(\d{4})-(\d{2})-(\d{2})/);
      if (isoMatch) {
        const year = Number(isoMatch[1]);
        const month = Number(isoMatch[2]) - 1;
        const day = Number(isoMatch[3]);
        return new Date(year, month, day);
      }

      const parsed = new Date(rawValue);
      return Number.isNaN(parsed.getTime()) ? null : parsed;
    }

    // Atualizar nome do casal em tempo real
    document.getElementById('couple-name').addEventListener('input', (e) => {
      const preview = document.getElementById('couple-name-preview');
      preview.innerText = e.target.value.trim() || '*******';
    });

    // Atualizar o countdown conforme a data de in√≠cio
    const startDateInput = document.getElementById('start-date');
    startDateInput.addEventListener('change', (e) => {
      startCountdown(e.target.value);
    });

    if (startDateInput.value) {
      startCountdown(startDateInput.value);
    }

    // Atualizar ano do rodap√©
    document.getElementById('footer-year').innerText = new Date().getFullYear();

    // Obter a chave p√∫blica do backend
    async function getPublicKey() {
      const response = await fetch('/config');
      const data = await response.json();
      return data.publicKey;
    }

    // Inicializar Stripe com a chave p√∫blica
    getPublicKey().then(publicKey => {
      const stripe = Stripe(publicKey);
      const form = document.getElementById('checkout-form');
      const button = document.getElementById('comprar-btn');
      const feedback = document.getElementById('form-feedback');
      const promoCodeInput = document.getElementById('promo-code');

      const showFeedback = (message) => {
        feedback.textContent = message;
        if (!feedback.classList.contains('is-visible')) {
          feedback.classList.add('is-visible');
        }
      };

      form.addEventListener('input', () => {
        if (!button.disabled && feedback.classList.contains('is-visible')) {
          feedback.classList.remove('is-visible');
          feedback.textContent = '';
        }
      });

      form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const coupleName = document.getElementById('couple-name').value.trim();
        const planId = document.getElementById('plan').value;
        const startDate = document.getElementById('start-date').value;
        const photoInput = document.getElementById('photo');
        const photo = photoInput.files[0];
        const promoCode = promoCodeInput ? promoCodeInput.value.trim() : '';

        if (!coupleName || !planId || !startDate || !photo) {
          showFeedback('Por favor, preencha todos os campos e selecione uma foto antes de continuar.');
          return;
        }

        showFeedback('Preparando o checkout seguro‚Ä¶');
        button.disabled = true;
        button.textContent = 'Carregando‚Ä¶';

        const formData = new FormData();
        formData.append('coupleName', coupleName);
        formData.append('planId', planId);
        formData.append('startDate', startDate);
        formData.append('photo', photo);
        if (promoCode) {
          formData.append('promoCode', promoCode);
        }

        try {
          const response = await fetch('/create-checkout-session', {
            method: 'POST',
            body: formData
          });

          let session = {};
          try {
            session = await response.json();
          } catch (parseError) {
            console.error('N√£o foi poss√≠vel interpretar a resposta do servidor.', parseError);
          }

          if (!response.ok) {
            const errorMessage = session.error || 'N√£o foi poss√≠vel criar a sess√£o de pagamento. Verifique os dados informados e tente novamente.';
            showFeedback(errorMessage);
            return;
          }

          if (session.id) {
            const { error } = await stripe.redirectToCheckout({ sessionId: session.id });
            if (error) {
              console.error('Erro ao redirecionar para o checkout:', error);
              showFeedback('N√£o foi poss√≠vel abrir o checkout do Stripe. Tente novamente em instantes.');
            }
          } else {
            console.error('Erro ao criar sess√£o:', session.error);
            showFeedback(session.error || 'Houve um problema ao criar a sess√£o. Revise os dados e tente novamente.');
          }
        } catch (error) {
          console.error('Erro ao criar sess√£o de checkout:', error);
          showFeedback('N√£o conseguimos completar o pedido agora. Verifique sua conex√£o ou tente mais tarde.');
        } finally {
          button.disabled = false;
          button.textContent = 'Garantir meu QRLove';
        }
      });
    }).catch(error => {
      console.error('Erro ao obter a chave p√∫blica:', error);
      const feedback = document.getElementById('form-feedback');
      feedback.textContent = 'N√£o foi poss√≠vel carregar a chave p√∫blica do Stripe. Atualize a p√°gina para tentar novamente.';
      feedback.classList.add('is-visible');
      document.getElementById('comprar-btn').disabled = true;
    });
  </script>
</body>
</html>
